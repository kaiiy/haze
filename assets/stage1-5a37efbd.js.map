{"version":3,"file":"stage1-5a37efbd.js","sources":["../../assets/js/stages/haze1.ts"],"sourcesContent":["import $ from 'jquery';\r\nimport 'normalize.css';\r\nimport \"../../css/haze.scss\";\r\n\r\ntype Cells = (number | string)[][]\r\ntype Point = [number, number]\r\n\r\n\r\nconst isRightBoundary = (index: number, width: number) =>\r\n\tindex % width !== width - 1;\r\nconst isLeftBoundary = (index: number, width: number) =>\r\n\tindex % width !== 0;\r\nconst isTopBoundary = (index: number, width: number) =>\r\n\tindex > width - 1;\r\nconst isBottomBoundary = (index: number, width: number, height: number) =>\r\n\tindex < width * (height - 1);\r\n\r\n\r\nconst canMoveRight = (index: number, cells: Cells, width: number) =>\r\n\tisRightBoundary(index, width) && cells[index + 1][0] === 0\r\nconst canMoveLeft = (index: number, cells: Cells, width: number) =>\r\n\tisLeftBoundary(index, width) && cells[index - 1][0] === 0\r\nconst canMoveUp = (index: number, cells: Cells, width: number) =>\r\n\tisTopBoundary(index, width) && cells[index - width][0] === 0\r\nconst canMoveDown = (index: number, cells: Cells, width: number, height: number) =>\r\n\tisBottomBoundary(index, width, height) && cells[index + width][0] === 0\r\n\r\nconst isAtGoal = (currentPoint: Point, goalPoint: Point) =>\r\n\tgoalPoint[0] === currentPoint[0] && goalPoint[1] === currentPoint[1]\r\n\r\nconst rotateDirectionIndicator = (currentPoint: Point, goalPoint: Point): void => {\r\n\tif (isAtGoal(currentPoint, goalPoint)) {\r\n\t\t$('#ue-img').css('display', 'none');\r\n\t\t$('.displayClear').css('display', 'block');\r\n\t\tsetTimeout(() => alert('Number: 5'), 500);\r\n\t} else {\r\n\t\t$('#ue-img').css('display', 'block');\r\n\t}\r\n\r\n\tconst atan = Math.atan((goalPoint[1] - currentPoint[1]) / (goalPoint[0] - currentPoint[0])) * (180 / Math.PI);\r\n\tconst theta = goalPoint[0] - currentPoint[0] >= 0 ? 90 + atan : atan - 90;\r\n\r\n\t$('#ue-img').css('transform', 'rotate(' + theta + 'deg)');\r\n};\r\n\r\nconst updateDisplayBasedOnCell = (index: number, cells: Cells, width: number, height: number, currentPoint: Point, goalPoint: Point) => {\r\n\t$('.box').css('border', '1px solid black');\r\n\tif (cells[index][0] === 0) {\r\n\t\t$('.box').css('background-color', 'white');\r\n\t} else {\r\n\t\t$('.box').css('background-color', 'black');\r\n\t}\r\n\tif (cells[index][1] !== 0) {\r\n\t\t$('.box').text(cells[index][1]);\r\n\t} else {\r\n\t\t$('.box').text('');\r\n\t}\r\n\tif (isRightBoundary(index, width)) {\r\n\t\tif (cells[index + 1][0] === 1) {\r\n\t\t\t$('.box').css('border-right', '6px solid black');\r\n\t\t}\r\n\t} else {\r\n\t\t$('.box').css('border-right', '3px solid black');\r\n\t}\r\n\tif (isLeftBoundary(index, width)) {\r\n\t\tif (cells[index - 1][0] === 1) {\r\n\t\t\t$('.box').css('border-left', '6px solid black');\r\n\t\t}\r\n\t} else {\r\n\t\t$('.box').css('border-left', '3px solid black');\r\n\t}\r\n\tif (isTopBoundary(index, width)) {\r\n\t\tif (cells[index - width][0] === 1) {\r\n\t\t\t$('.box').css('border-top', '6px solid black');\r\n\t\t}\r\n\t} else {\r\n\t\t$('.box').css('border-top', '3px solid black');\r\n\t}\r\n\tif (isBottomBoundary(index, width, height)) {\r\n\t\tif (cells[index + width][0] === 1) {\r\n\t\t\t$('.box').css('border-bottom', '6px solid black');\r\n\t\t}\r\n\t} else {\r\n\t\t$('.box').css('border-bottom', '3px solid black');\r\n\t}\r\n\trotateDirectionIndicator(currentPoint, goalPoint);\r\n};\r\n\r\n\r\n\r\nconst main = (): void => {\r\n\tconst WIDTH = 4;\r\n\tconst HEIGHT = 4;\r\n\tconst CELLS: Cells = [\r\n\t\t[0, 'S'],\r\n\t\t[0, 0],\r\n\t\t[0, 0],\r\n\t\t[1, 0],\r\n\t\t[0, 0],\r\n\t\t[1, 0],\r\n\t\t[0, 0],\r\n\t\t[0, 0],\r\n\t\t[0, 0],\r\n\t\t[0, 0],\r\n\t\t[1, 0],\r\n\t\t[0, 0],\r\n\t\t[0, 0],\r\n\t\t[1, 0],\r\n\t\t[0, 'G'],\r\n\t\t[0, 0],\r\n\t];\r\n\tconst GOAL_POINT: Point = [2, 3];\r\n\r\n\tconst ueImgElement = document.getElementById('ue-img');\r\n\tif (ueImgElement === null) {\r\n\t\tconsole.error('ue-img is null');\r\n\t\treturn;\r\n\t}\r\n\tconst imgWidth = ueImgElement.clientWidth;\r\n\t$('#ue-img').css('left', 'calc(50% - ' + imgWidth / 2 + 'px)');\r\n\r\n\tlet index = 0;\r\n\tlet currentPoint: Point = [0, 0];\r\n\r\n\tupdateDisplayBasedOnCell(index, CELLS, WIDTH, HEIGHT, currentPoint, GOAL_POINT);\r\n\r\n\t$(document).on(\"keyup\", (e: JQuery.KeyUpEvent) => {\r\n\t\tconst { key } = e;\r\n\t\tif (!isAtGoal(currentPoint, GOAL_POINT)) {\r\n\t\t\tconst keyActions: { [key: string]: { check: () => boolean, action: () => void } } = {\r\n\t\t\t\t\"ArrowRight\": {\r\n\t\t\t\t\tcheck: () => canMoveRight(index, CELLS, WIDTH),\r\n\t\t\t\t\taction: () => { index++; currentPoint[0]++; }\r\n\t\t\t\t},\r\n\t\t\t\t\"ArrowLeft\": {\r\n\t\t\t\t\tcheck: () => canMoveLeft(index, CELLS, WIDTH),\r\n\t\t\t\t\taction: () => { index--; currentPoint[0]--; }\r\n\t\t\t\t},\r\n\t\t\t\t\"ArrowUp\": {\r\n\t\t\t\t\tcheck: () => canMoveUp(index, CELLS, WIDTH),\r\n\t\t\t\t\taction: () => { index -= WIDTH; currentPoint[1]--; }\r\n\t\t\t\t},\r\n\t\t\t\t\"ArrowDown\": {\r\n\t\t\t\t\tcheck: () => canMoveDown(index, CELLS, WIDTH, HEIGHT),\r\n\t\t\t\t\taction: () => { index += WIDTH; currentPoint[1]++; }\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (key in keyActions && keyActions[key].check()) {\r\n\t\t\t\tkeyActions[key].action();\r\n\t\t\t\tupdateDisplayBasedOnCell(index, CELLS, WIDTH, HEIGHT, currentPoint, GOAL_POINT);\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}\r\n\r\nmain()"],"names":["isRightBoundary","index","width","isLeftBoundary","isTopBoundary","isBottomBoundary","height","canMoveRight","cells","canMoveLeft","canMoveUp","canMoveDown","isAtGoal","currentPoint","goalPoint","rotateDirectionIndicator","$","atan","theta","updateDisplayBasedOnCell","main","CELLS","GOAL_POINT","ueImgElement","imgWidth","e","key","keyActions"],"mappings":"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"}